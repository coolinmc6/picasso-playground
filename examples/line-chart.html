<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Picasso Starter</title>
  <script src="https://unpkg.com/picasso.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }
    #container {
      /* height: 100%; */
      max-width: 1600px;
      min-height: 600px;
      position: relative;
    }
    </style>
</head>
<body>
  <a href="../index.html">Back</a>
  <div id="container"></div>


  <script>
    const data = [{"type":"matrix","data":[["Year","Sales","Margin"],[946702800000,-2025.2609171933589,0.8141905696394521],[978325200000,-2667.853260722808,0.948172968335995],[1009861200000,-340.12980025757145,1.180761999186037],[1041397200000,6222.720769642178,1.5426773294905565],[1072933200000,3022.7214844518357,1.7811513524501683],[1104555600000,10814.607686658117,1.6732045268789204],[1136091600000,7544.339545318524,1.43670153155283],[1167627600000,945.9865888424001,1.6328799013832416],[1199163600000,17927.326675927376,1.2860662256565913],[1230786000000,13627.965068525576,1.079062739014046],[1262322000000,24736.02290307425,1.0494250099560265],[1293858000000,41172.105939894645,0.9271138340439121],[1325394000000,54426.66011746234,0.6766335110929524],[1357016400000,45317.58130654622,1.2699500263193118],[1388552400000,61338.629685648026,1.3367674273203711],[1420088400000,75467.81199815273,0.9778856800714885],[1451624400000,101996.68769812898,0.6060474314029372],[1483246800000,115326.47248813222,1.0748078142127526],[1514782800000,123112.36130506266,1.5310349087578414],[1546318800000,124703.25637655858,1.4400836647884476],[1577854800000,137597.53200670466,1.8190700121399834],[1609477200000,152398.39429188208,2.3407535257598804],[1641013200000,181319.46700448182,2.1977543684190444],[1672549200000,180720.53340031666,2.024070136882963],[1704085200000,203869.636659673,1.7109728726225624],[1735707600000,219371.12334069627,1.9079049475402066],[1767243600000,239213.18304785297,1.9992934304658985],[1798779600000,250271.40998248753,2.2017519527511116],[1830315600000,259394.46544447815,2.7643555321224733],[1861938000000,288157.0227294735,2.3780404074424677],[1893474000000,281648.57188234874,2.950719655918416],[1925010000000,278079.1108960712,3.2773759038383536],[1956546000000,298060.9771518688,2.9727227324688963],[1988168400000,304435.044504166,3.273936898421588],[2019704400000,304880.1176312757,3.8405341007308333],[2051240400000,304981.4930072061,3.8061854597265805],[2082776400000,311516.1717370921,4.048923511794422],[2114398800000,313940.68608403305,3.8067303569004327],[2145934800000,327159.69906475913,4.338178974179681],[2177470800000,329323.95428129693,4.256635736731279],[2209006800000,346275.2085920976,4.30055414945414],[2240629200000,354691.9120849235,4.401087672659029],[2272165200000,363886.656000486,4.150297274828754],[2303701200000,370699.8827793057,4.182746870419346],[2335237200000,378840.8350909606,4.372930790517878],[2366859600000,388275.97676300386,4.401179616388351],[2398395600000,408585.6625337996,4.1294044123232885],[2429931600000,410574.4343443844,4.680776871803438],[2461467600000,417956.9646170157,4.624970541159506],[2493090000000,428316.2647951257,4.531040937856989]]}]
    console.log(data);
    
    const line = function(scale, ref, stroke, dash) {
      return {
        type: 'line',
        data: {
          collection: 'lines'
        },
        settings: {
          coordinates: {
            major: { scale: 't' },
            minor: { scale, ref }
          },
          layers: {
            curve: 'monotone',
            line: {
              stroke,
              strokeDasharray: dash
            }
          }
        }
      };
    }

    const colors = {
      Sales: '#060',
      Margin: '#6c0'
    };
    picasso.chart({
      element: document.querySelector('#container'),
      data,
      settings: {
        collections: [{
          key: 'lines',
          data: {
            extract: {
              field: 'Year',
              props: {
                s: { field: 'Sales' },
                m: { field: 'Margin' }
              }
            }
          }
        }],
        scales: {
          y: {
            data: { field: 'Sales' },
            invert: true,
            expand: 0.2
          },
          marg: {
            data: { field: 'Margin' },
            invert: true,
            expand: 0.2
          },
          t: {data: { extract: { field: 'Year' } } }
        },
        components: [{
          type: 'legend-cat',
          dock: 'top',
          scale: {
            type: 'categorical-color',
            data: ['Sales', 'Margin'],
            range: [colors.Sales, colors.Margin]
          }
        },{
          type: 'axis',
          dock: 'left',
          scale: 'y',
          formatter: {
            type: 'd3-number',
            format: '$,.1r'
          },
          settings: {
            labels: {
                fill: colors.Sales
            }
          },
        },{
          type: 'axis',
          dock: 'right',
          scale: 'marg',
          settings: {
            labels: {
                fill: colors.Margin
            }
          },
          formatter: {
            type: 'd3-number',
            format: '.0%'
          }
        },{
          type: 'axis',
          dock: 'bottom',
          scale: 't',
          formatter: {
            type: 'd3-time',
            format: '%Y-%m'
          }
        }, line('marg', 'm', colors.Margin),
          line('y', 's', colors.Sales, '2 4')
        ]
      }
    })
  
  </script>
</body>
</html>